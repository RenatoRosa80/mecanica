{% extends "base_dashboard.html" %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Ordem #{{ object.pk }}</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
  <div class="card p-4">
    <p><strong>Cliente:</strong> {{ object.cliente.nome }}</p>
    <p><strong>Veículo:</strong> {{ object.veiculo }}</p>
    <p><strong>Status:</strong> {{ object.get_status_display }}</p>
    <p><strong>Aberta em:</strong> {{ object.data_abertura }}</p>
    <p><strong>Observações:</strong> {{ object.observacoes }}</p>
  </div>

  <div class="card p-4">
    <h3 class="font-semibold">Itens</h3>
    <table class="w-full">
      <thead class="bg-gray-100">
        <tr><th>Serviço</th><th>Qtd</th><th>Preco</th><th>Subtotal</th></tr>
      </thead>
      <tbody>
        {% for i in object.itens.all %}
        <tr class="border-t">
          <td class="p-2">{{ i.servico.nome }}</td>
          <td class="p-2">{{ i.quantidade }}</td>
          <td class="p-2">R$ {{ i.preco_unitario }}</td>
          <td class="p-2">R$ {{ i.subtotal }}</td>
        </tr>
        {% endfor %}
        <tr class="border-t font-bold">
          <td colspan="3" class="p-2 text-right">Total</td>
          <td class="p-2">R$ {{ object.total }}</td>
        </tr>
      </tbody>
    </table>

    <div class="mt-4">
      <a href="{% url 'servicos:ordem_update' object.pk %}" class="bg-yellow-500 text-white px-3 py-1 rounded">Editar</a>
      <a href="{% url 'servicos:ordem_concluir' object.pk %}" class="bg-green-600 text-white px-3 py-1 rounded">Marcar Concluída</a>
      <a href="{% url 'servicos:ordens' %}" class="ml-2 text-gray-600">Voltar</a>
    </div>
  </div>
</div>
{% endblock %}
